<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../css/main.css" >
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <title>123791283123b12h321vg3v23h2vb3</title>
  </head>
  <body style="-webkit-app-region: drag">

    <div id="title">
      <span></span>
    </div>

    <div id="main-screen">
      <span id="background_pkm"></span>
      <div class="content">

        <div class="menu-item-small" id="fishing">
          <span class="icon-button"></span>
          <div id="text">Fishing</div>
        </div>

        <div class="menu-item-small" id="revive">
          <span class="icon-button"></span>
          <div id="text">Auto-Revive</div>
        </div>

        <div class="clear-float"></div>

        <div class="menu-item" id="screenCoords">
          <span class="icon-button"></span>
          <div id="coord_span">
            <div class="coord_element">
              <label for="coordx" class="coord_label">x</label>
              <input name="coordx" class="coord_field" disabled>
            </div>
            <div class="coord_element">
              <label for="coordy" class="coord_label">y</label>
              <input name="coordy" class="coord_field" disabled>
            </div>
            <div class="coord_element">
              <label for="coordw" class="coord_label">w</label>
              <input name="coordw" class="coord_field" disabled>
            </div>
            <div class="coord_element">
              <label for="coordh" class="coord_label">h</label>
              <input name="coordh" class="coord_field" disabled>
            </div>
          </div>
        </div>

        <div class="menu-item" id="caveBot">
          <span class="icon-button"></span>
          <div id="text">Cave-bot</div>
        </div>

        <div id="console-title">Console:<br></div>
        <div id="console"></div>

      </div> <!--end content-->
    </div> <!--end main-->

    <div id="cave-screen">
      <div id="container-route">
        <div class="container-title"> Profile</div>
        <div class="profile-icons">
          <div class="icon-el">+</div>
          <div class="icon-el">-</div>
        </div>
        <select name="profile" id="profile">
          <option value="prof1">bush</option>
          <option value="prof2">wood</option>
          <option value="prof3">machamp hunt</option>
        </select>
        <ul class="list-commands">
          <li class="sel-el">
            <div class="sel-text">Zurich</div>
            <div class="remove-el"></div>
          </li>
          <li class="sel-el">
            <div class="sel-text">Geneva</div>
            <div class="remove-el"></div>
          </li>
          <li class="sel-el">
            <div class="sel-text">Winterthur</div>
            <div class="remove-el"></div>
          </li>
          <li class="sel-el">
            <div class="sel-text">Lausanne</div>
            <div class="remove-el"></div>
          </li>
          <li class="sel-el">
            <div class="sel-text">Lucerne</div>
            <div class="remove-el"></div>
          </li>
        </ul>
        <div class="manage-options">
          <div id="new" class="el">New</div>
          <div id="save" class="el">Save</div>
        </div>
      </div>

      <div id="container-functions">
        <div class="container-title"> functions</div>
        <div class="features">
          <div id="checkpoint" class="feature-el"></div>
          <div id="click" class="feature-el"></div>
          <div id="keyboard" class="feature-el"></div>
          <div class="clear-float"></div>
          <div id="move" class="feature-el"></div>
          <div id="battle" class="feature-el"></div>
          <div id="timer" class="feature-el"></div>
        </div>
      </div>

      <div id="container-loot"></div>

      <div id="footer">
        <div class="menu-icon" id="btVoltar"></div>
      </div>

    </div>
  </body>

  <script type="text/javascript" src="../bot.js"></script>
  <script type="text/javascript">
    console.log(process.versions);

    /* Flags */

    lockFlag = 0;

    /* Elements */

    divCaveBot = document.querySelector("#caveBot");
    divCaveIcon = document.querySelector("#caveBot span");

    divCaveScreen = document.querySelector("#cave-screen");
    divMainScreen = document.querySelector("#main-screen");

    listCommands = document.querySelector(".list-commands");

    /* Buttons */
    btVoltar = document.querySelector("#btVoltar");

    /* Functions */
    var removeCommandEl = (e) => {
      let el = e.target.parentElement;
      el.parentElement.removeChild(el);
    }

    var addLockScreen = () => {
      lockFlag=1;
      let opacityDiv = document.createElement("div");
      opacityDiv.classList.add("lock-screen");
      document.body.appendChild(opacityDiv);
      opacityDiv.addEventListener("click", function(){
        removeLockScreen();
      });
    }

    var removeLockScreen = () => {
      let opacityDiv = document.querySelector(".lock-screen");
      document.body.removeChild(opacityDiv);
      let divPrompt = document.querySelector(".prompt");
      document.body.removeChild(divPrompt);
      lockFlag = 0;
    }

    /* Events */
    divCaveBot.addEventListener("mouseover", function(){
      divCaveIcon.style.backgroundImage = "url('../img/red_champion.gif')";
    });

    divCaveBot.addEventListener("mouseout", function(){
      divCaveIcon.style.backgroundImage = "url('../img/red_champion.png')";
    });

    divCaveBot.addEventListener("click", function(){
      divCaveScreen.style.display = "block";
      divMainScreen.style.display = "none";
    });

    btVoltar.addEventListener("click", function(){
      divCaveScreen.style.display = "none";
      divMainScreen.style.display = "block";
    });

    BtsRemoveEl = document.querySelectorAll(".remove-el");
    for (var i = 0; i < BtsRemoveEl.length; i++) {
      BtsRemoveEl[i].addEventListener("click", function(e){
        removeCommandEl(e);
      });
    }

    btNew = document.getElementById("new");
    selProfile = document.getElementById("profile");
    listCommands = document.querySelector(".list-commands");
    btNew.addEventListener("click", function(){
      if(!lockFlag){
        addLockScreen();
        let divPrompt = document.createElement("div");
        divPrompt.classList.add("prompt");
        divPrompt.classList.add("lock-el");
          divPrompt.innerHTML = `<div class="text">Type the name of the new PROFILE</div><input name="prompt" id="input-prompt"/><div class="btConfirm">Ok</div>`;
        document.body.appendChild(divPrompt);
        document.querySelector("#input-prompt").focus();

        let btConfirmPrompt = document.querySelector(".btConfirm");
        btConfirmPrompt.addEventListener("click", function(){
          let input = document.querySelector(".prompt input");
          if(input.value){
            let option = document.createElement("option");
            option.value = input.value;
            option.text = input.value;
            selProfile.appendChild(option);
            selProfile.selectedIndex = selProfile.length-1;
            let listLength = listCommands.children.length;
            for(var i=0; i<listLength; i++){
              listCommands.removeChild(listCommands.children[0]);
            }
            removeLockScreen();
          }
        });

        let res = null;
        if (res){
        }
      }
    });

    btSave = document.getElementById("save");
    btSave.addEventListener("click", function(){
      let iSelected = selProfile.options.selectedIndex;
      console.log(selProfile.options[iSelected].text);
      console.log(listCommands.children[0].dataset.cmdType);
    });

  </script>
</html>
